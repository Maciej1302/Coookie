#:import Factory kivy.factory.Factory
<MyPopup@Popup>
    auto_dismiss:False
    size_hint: 0.6,0.7
    pos_hint:{"x":0.2,"top":0.9}
    title:"ERROR"
    BoxLayout:
        orientation:"vertical"
        size: root.width, root.height
        Label:
            text: "Wrong input"
            font_size:26
        Button:
            size_hint: 0.8,0.2
            pos_hint:{"x":0.1}
            text:"Close"
            on_release: root.dismiss()

WindowManager:
    OptionWindow:
    FirstWindow:
    SecondWindow:
    ThirdWindow:
    RegisterWindow:
    GuestApp:
    LoggedApp:
    


<FirstWindow>
    name:"first"
    BoxLayout:
        orientation: "vertical"
        padding: 100

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 3
                spacing: 20


                Button:

                    size_hint: 0.1, 0.1
                    text: "Login as Guest"
                    font_size:20
                    background_color: "blue"
                    color:1, 1, 1, 1
                    on_release:
                        root.manager.transition.direction = "down"

                    on_release:
                        app.root.current = "guestapp"
                Button:

                    size_hint: 0.1, 0.1
                    text: "Login"
                    font_size:20
                    background_color: "blue"

                    on_release:
                        app.root.current = "second"
                        root.manager.transition.direction = "up"
                Button:
                    padding: 20
                    text: "Register"
                    background_color: "blue"
                    font_size:20
                    size_hint: 0.1, 0.1
                    color:1,1,1,1
                    on_release:
                        app.root.current = "register_window"
                        root.manager.transition.direction = "up"

<ThirdWindow>
    name:"third"


    GridLayout:
        cols:1
        Label:
            id:recipe
            font_size:20
            text:"Enter your ingredients"
            color:0.9,0.255,0.255,1

        TextInput:
            id:ingredients
            on_release:
            multiline:False


        Button:
            text: "Find your recipe"
            background_color: "grey"
            font_size:20
            size_hint: 0.1, 0.2

            on_release:
                root.press()
                ingredients.text=""

        Button:
            text: "Go Back"
            background_color: "grey"
            font_size:20
            size_hint: 0.1, 0.2

            on_release:
                app.root.current = "second"
                root.manager.transition.direction = "down"
               
<RegisterWindow>:
    name:"register_window"
    BoxLayout:
        orientation: "vertical"
        padding: 40

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 11
                spacing: 15

                Label:
                    text: "Enter your name:"
                    font_size:20
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                
                TextInput:
                    id: name
                    multiline:False
                    size_hint: 0.3, 0.6
                
                Label:
                    text:"Enter your surname:"
                    font_size:20
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                
                TextInput:
                    id: surname
                    multiline:False
                    size_hint: 0.3, 0.6
                
                
                Label:
                    text:"Enter your email:"
                    font_size:20
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                
                TextInput:
                    id: email
                    multiline:False
                    size_hint: 0.3, 0.6
                Label:
                    text:"Enter your password:"
                    font_size:20
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                
                
                TextInput:
                    id: register_passw
                    multiline:False
                    size_hint: 0.3, 0.6
                    password: True
                    hint_text: "min. 8 characters, min. 1 capital letter, min. 1 lowercase letter, min. 1 special character"
                
                Label:
                    text:"Enter your date of birth:"
                    font_size:20
                    color: 0, 0, 0, 1
                    size_hint_y: 0.1
                    
                
                
                TextInput:
                    id: date_birth
                    multiline: False
                    size_hint: 0.3, 0.6
                    hint_text: "YYYY-MM-DD"
                    
                GridLayout:
                    rows: 2
                    spacing: 5
                    Button:
                        text: "Submit"
                        
                        on_release: 
                            root.verification(date_birth.text,email.text,name.text,surname.text, register_passw.text )
                            email.text=""
                            name.text=""
                            surname.text=""
                            register_passw.text=""
                            register_passw.hint_text = "min. 8 characters, min. 1 capital letter, min. 1 lowercase letter, min. 1 special character" 
                            date_birth.text = ""
                            date_birth.hint_text = "YYYY-MM-DD"

                        background_color: "grey"
                        size_hint: 0.5, 0.5
                        font_size:20
                    
                    Button:
                        text: "Go Back"
                        background_color: "grey"
                        font_size:20
                        size_hint: 0.5, 0.5
                        on_release:
                            app.root.current = "first"
                            root.manager.transition.direction = "down"
<SecondWindow>:
    name: "second"
    BoxLayout:
        orientation: "vertical"
        padding: 100

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 6
                spacing: 20

                Label:
                    text: "Email"
                    font_size: 20
                    color: 0, 0, 0, 1
                    valign: "middle"  # Wyśrodkuj napis w pionie
                    halign: "left"  # Wyrównaj napis do lewej strony
                    size_hint_y: 0.02

                TextInput:
                    id: login
                    multiline: False

                Label:
                    text: "Password"
                    font_size: 20
                    color: 0, 0, 0, 1
                    valign: "middle"  # Wyśrodkuj napis w pionie
                    halign: "left"  # Wyrównaj napis do lewej strony
                    size_hint_y: 0.02

                TextInput:
                    id: password
                    multiline: False
                    password: True

                BoxLayout:
                    spacing: 10  # Odstęp tylko między przyciskami w tym kontenerze

                    Button:
                        text: "Sign In"
                        background_color: "grey"
                        font_size: 20
                        size_hint: 0.3, 0.9

                        on_release:
                            root.verification()
                            login.text=""
                            password.text=""
                    Button:
                        text: "Go Back"
                        background_color: "grey"
                        font_size:20
                        size_hint: 0.3, 0.9
                        on_release:
                            app.root.current = "first"
                            root.manager.transition.direction = "down"

<GuestApp>
    name: "guestapp"

    BoxLayout:
        orientation: "vertical"
        padding: 20 

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 5

                BoxLayout:
                    orientation: "vertical"
                    Label:
                        id: guest_recipe
                        text: "Enter your ingredients"
                        color: 0, 0, 0, 1
                        font_size: 24 
                    TextInput:
                        id: guest_ingredients
                        multiline: True

                Label:
                    text: "Suggested recipes:"
                    x: -50 
                    color: 0, 0, 0, 1
                    font_size: 20
                    size_hint_y: None
                    height: self.texture_size[1]
                    padding: 10
                
                ScrollView:
                    Label:
                        id: guest_space
                        size_hint_y: None
                        height: self.texture_size[1]
                        text_size: self.width, None
                        color: 0, 0, 0, 1
                        #Image:
                            #source:"kanapka_ze_schabem.png"
                            #allow_stretch: True
                            #keep_ratio:False
                Button:
                    text: "Find your recipe"
                    background_color: "grey"
                    font_size: 20
                    size_hint: 0.1, 0.2
                    on_release:
                        guest_space.text = root.GuestPress(guest_ingredients.text)
                        guest_ingredients.text=""



                Button:
                    text: "Go back"
                    background_color: "grey"
                    font_size: 20
                    size_hint: 0.1, 0.2
                    on_release:
                        app.root.current = "first"
                        root.manager.transition.direction = "up"
                        guest_space.text=""

<LoggedApp>
    name: "loggedapp"

    BoxLayout:
        orientation: "horizontal"
        padding: 20 

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        #miejsce na guzik dla zalogowanego uzytkownika
        BoxLayout:
            orientation: "vertical"
            size_hint_x: None
            width: 20
            pos_hint: {"top": 1}
            padding: 0, 0, 0, 510
            
            Button:
                text:"Opcje"
                
                size_hint: None, None
                size: 20, 20  # Ustaw rozmiar guzika na 50x50
                pos_hint: {"top": 1, "left": 1}
                on_release:
                    app.root.current = "option"
                
                

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 5

                BoxLayout:
                    orientation: "vertical"
                    Label:
                        id: logged_recipe
                        text: "Enter your ingredients"
                        color: 0, 0, 0, 1
                        font_size: 24 
                    TextInput:
                        id: logged_ingredients
                        multiline: True

                Label:
                    text: "Suggested recipes:"
                    x: -50 
                    color: 0, 0, 0, 1
                    font_size: 20
                    size_hint_y: None
                    height: self.texture_size[1]
                    padding: 10
                
                ScrollView:
                    Label:
                        id: logged_space
                        size_hint_y: None
                        height: self.texture_size[1]
                        text_size: self.width, None
                        color: 0, 0, 0, 1

                Button:
                    text: "Find your recipe"
                    background_color: "grey"
                    font_size: 20
                    size_hint: 0.1, 0.2
                    on_release:
                        logged_space.text = root.LoggedPress(logged_ingredients.text)
                        logged_ingredients.text=""
                        
                        
                        
                    

                Button:
                    text: "Go back"
                    background_color: "grey"
                    font_size: 20
                    size_hint: 0.1, 0.2
                    on_release:
                        app.root.current = "first"
                        root.manager.transition.direction = "up"
                        logged_space.text=""

<OptionWindow>
    name: "option"
    BoxLayout:
        orientation: "vertical"
        padding: 75

        canvas.before:
            Color:
                rgba: 1, 1, 1, 1  # Ustaw kolor tła na biały
            Rectangle:
                pos: self.pos
                size: self.size

        AnchorLayout:
            anchor_x: "center"
            anchor_y: "center"

            GridLayout:
                rows: 12
                spacing: 10
        
                Button:
                    text: "My Account"
                    size_hint: 0.05, 0.2  # Zmniejsz szerokość na 5%
                    font_size: 25
                Button: 
                    text: "Saved Recipes"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button:
                    text: "Friends"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button: 
                    text: "Your Analysis"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button:
                    text: "Language"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button: 
                    text: "Dark Mode"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button: 
                    text: "Rate App"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button:
                    text: "Recommend App"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button: 
                    text: "About App"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button:
                    text: "Help"
                    size_hint: 0.05, 0.2
                    font_size: 25
                Button: 
                    text: "Sign Out"
                    size_hint: 0.05, 0.2
                    font_size: 25
                    on_release:
                        app.root.current = "first"
                Button:
                    text: "Go Back"
                    size_hint: 0.05, 0.2
                    font_size: 25
                    on_release:
                        app.root.current = "loggedapp"



        
        
        
        
         
           
